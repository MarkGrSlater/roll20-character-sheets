<!-- spiritSkillTemplate -->
<rolltemplate class="sheet-rolltemplate-training">
    <div class="sheet-rolltemplate-training">
        <div class="sheet-template-container">
        {{#rollLess() expcheck 101}}
            <!-- training roll - check if it worked -->
            <div class="sheet-template-header">{{ name }} {{ subtags }}: {{ expcheck }}</div>
                {{#rollLess() baseskill 100}}
                    {{#rollGreater() exproll baseskill}}
                        <div class="sheet-normal">
                            <span><strong>Experience Check Made!: &#10004;</strong><br>Rolled {{ exproll }} vs base skill of {{ normal  }}</span>
                        </div>
                    {{/rollGreater() exproll baseskill}}
                    {{#rollLess() exproll baseskillplus}}
                        <div class="sheet-fail">
                            <span><strong>Experience Roll Missed: &#10005;</strong><br>Rolled {{ exproll }} vs base skill of {{ normal  }}</span>
                        </div>
                    {{/rollLess() exproll baseskillplus}}
                {{/rollLess() baseskill 100}}
                {{#rollGreater() baseskill 99}}
                    {{#rollGreater() exproll master}}
                         <div class="sheet-normal">
                             <span><strong>Experience Check Made!: &#10004;</strong><br>Rolled {{ exproll }} vs base skill of {{ normal }} need to roll over {{ master }}</span>
                        </div>
                    {{/rollGreater() exproll master}}
                    {{#rollLess() exproll masterplus}}
                        <div class="sheet-fail">
                            <span><strong>Experience Roll Missed: &#10005;</strong><br>Rolled {{ exproll }} vs base skill of {{ normal }} need to roll over {{ master }}</span>
                        </div>
                    {{/rollLess() exproll masterplus}}
                {{/rollGreater() baseskill 99}}
                {{#rollLess() rollmade 0}}
                    {{#rollLess() baseskill 1}}
                        <!-- training new skill - failed so need to start again -->
                        <div class="sheet-fail">
                            <span>Attempt to learn new skill {{ name }} failed.<br>Start again after another 50 hours.</span>
                        </div>
                    {{/rollLess() baseskill 1}}
                    <!-- player already has some ability in this skill -->
                    {{#rollGreater() baseskill 0}}
                        {{#rollLess() rollmade -1}}
                            <!-- rolled -2 -->
                            {{#rollLess() baseskill 3}}
                                <!-- cannot reduce skill to 0 so present with the minimum -->
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. New skill is {{ minskill }}</span>
                                </div>
                            {{/rollLess() baseskill 3}}
                            {{#rollGreater() baseskill 2}}
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. Reduce skill by {{ rollmade }}</span>
                                </div>
                            {{/rollGreater() baseskill 2}}
                        {{/rollLess() rollmade -1}}
                        {{#rollGreater() rollmade -2}}
                            <!-- rolled -1 -->
                            {{#rollLess() baseskill 2}}
                                <!-- cannot reduce skill to 0 so present with the minimum -->
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. New skill is {{ minskill }}</span>
                                </div>
                            {{/rollLess() baseskill 2}}
                            {{#rollGreater() baseskill 1}}
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. Reduce skill by {{ rollmade }}</span>
                                </div>
                            {{/rollGreater() baseskill 1}}
                        {{/rollGreater() rollmade -2}}
                    {{/rollGreater() baseskill 0}}
                {{/rollLess() rollmade 0}}
                {{#rollLess() rollmade 1}}
                    {{#rollGreater() rollmade -1}}
                        <!-- rolled 0 -->
                        <div class="sheet-fail">
                            <span>No improvement training {{ name }}. Try again in another {{ baseskill }} hours.</span>
                        </div>
                    {{/rollGreater() rollmade -1}}
                {{/rollLess() rollmade 1}}
                {{#rollGreater() rollmade 0}}
                    <div class="sheet-normal">
                        <span>Success! Increase {{ name }} skill by {{ rollmade }}!</span>
                    </div>
                {{/rollGreater() rollmade 0}}
            </div>
        {{/rollLess() expcheck 101}}
        {{#rollGreater() expcheck 100}}
            <!-- skill roll from trainer -->
            <div class="sheet-template-header">{{ name }} {{ subtags }}: {{ rollmade }}</div>
                <!-- updated skill cannot be less than 0 -->
                {{#rollLess() rollmade 0}}
                    {{#rollLess() baseskill 1}}
                        <!-- training new skill - failed so need to start again -->
                        <div class="sheet-fail">
                            <span>Attempt to learn new skill {{ name }} failed.<br>Start again after another 50 hours.</span>
                        </div>
                    {{/rollLess() baseskill 1}}
                    <!-- player already has some ability in this skill -->
                    {{#rollGreater() baseskill 0}}
                        {{#rollLess() rollmade -1}}
                            <!-- rolled -2 -->
                            {{#rollLess() baseskill 3}}
                                <!-- cannot reduce skill to 0 so present with the minimum -->
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. New skill is {{ minskill }}</span>
                                </div>
                            {{/rollLess() baseskill 3}}
                            {{#rollGreater() baseskill 2}}
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. Reduce skill by {{ rollmade }}</span>
                                </div>
                            {{/rollGreater() baseskill 2}}
                        {{/rollLess() rollmade -1}}
                        {{#rollGreater() rollmade -2}}
                            <!-- rolled -1 -->
                            {{#rollLess() baseskill 2}}
                                <!-- cannot reduce skill to 0 so present with the minimum -->
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. New skill is {{ minskill }}</span>
                                </div>
                            {{/rollLess() baseskill 2}}
                            {{#rollGreater() baseskill 1}}
                                <div class="sheet-fail">
                                    <span>{{ name }} training failed. Reduce skill by {{ rollmade }}</span>
                                </div>
                            {{/rollGreater() baseskill 1}}
                        {{/rollGreater() rollmade -2}}
                    {{/rollGreater() baseskill 0}}
                {{/rollLess() rollmade 0}}
                {{#rollLess() rollmade 1}}
                    {{#rollGreater() rollmade -1}}
                        <!-- rolled 0 -->
                        <div class="sheet-fail">
                            <span>No improvement training {{ name }}. Try again in another {{ baseskill }} hours.</span>
                        </div>
                    {{/rollGreater() rollmade -1}}
                {{/rollLess() rollmade 1}}
                {{#rollGreater() rollmade 0}}
                    <div class="sheet-normal">
                        <span>Success! Increase {{ name }} skill by {{ rollmade }}!</span>
                    </div>
                {{/rollGreater() rollmade 0}}
            </div>
        {{/rollGreater() expcheck 100}}
        </div>
    </div>
</rolltemplate>